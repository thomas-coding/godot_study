# Dual-Track Governance (Learner Line + Mentor Line)

Last Updated: 2026-02-21
Status: Active
Baseline: Godot 4.6

## 1) 项目定位（长期）

- 本项目是长期双轨制：
  - 学员线：用户亲自学习与实作。
  - 导师线：AI 导师自学习与教学资产建设。
- 任何会话都必须同时维护“当前进度 + 后续计划 + 可交接状态”。

## 2) 轨道判定规则（强制）

- 学员线触发词（示例）：`我开始学习`、`继续今天学习`、`继续学`、`学下一课`、`第X课`、`上课`、`我学`、`学员线`。
- 导师线触发词（示例）：`你自己学习`、`你先学习`、`学习下godot`、`你备下课`、`备课`、`导师线`。
- 若用户表述有歧义，默认进入学员线。
- 同一会话内切换轨道时，必须明确告知“已切换到哪条线”。
- 课次与自然日解耦：一天可以学习多课，也可以不学习。

## 3) 学员线固定SOP（每节课必须一致）

1. 上节回顾（3-5 分钟，确认已掌握与未掌握）。
2. 今日目标（一句话 + 可验收）。
3. Runbook执行（按步骤，不跳步）。
4. 运行验证（给出通过/失败标准）。
5. 最小修复（仅处理阻塞问题）。
6. 结课播报（验收通过后先明确“本课完成”，并等待学员安排）。
7. 课后沉淀（仅导师线执行：日报 + 状态 + `.opencode/SESSION_STATE.md`；需要长历史时再追加 handoff）。

说明：禁止“今天这样上、明天那样上”的随机流程漂移。
说明：学员线进行中禁止导师备课与导师知识库扩写，避免学员等待。
说明：学员线结课后默认停在学员线（答疑/轻量文档），仅在用户明确要求后切导师线执行耗时工作。

## 4) 导师线固定SOP（每轮必须包含学员规划）

1. 输出本轮学习计划（模块 + 产出文件）。
2. 基于 docs + 源码做证据化学习。
3. 写回模块/卡片/QA/索引与看板。
4. 更新会话交接。
5. 同步产出“学员线下一节课计划”（至少包含下节目标、步骤、验收点）。

说明：导师线不是只做知识扩展，必须承担教学规划职责。

## 5) 长期规划与交接要求

- 每次会话都要写清：
  - 学员线当前进度（第 X 课完成度、当前阻塞、下一步）。
  - 导师线当前进度（能力百分比、已完成资产、下一轮重点）。
- 导师线必须持续维护“至少提前 3 课”的备课缓冲（runbook 可直接执行）。
- `.opencode/SESSION_STATE.md` 必须可让“下一个 AI”无上下文直接接管。
- `.opencode/PROJECT_BRIEF.md` 维护长期规则与范围边界。
- `handoff_latest.md` 保留为长历史追溯档案（按需追加，不再作为每日首读）。
- 若新增规则，优先写入：
  - `.opencode/PROJECT_BRIEF.md`
  - `.opencode/SESSION_STATE.md`
  - `AGENTS.md`
  - `03_sessions/session_protocol.md`
  - 本文件（`dual_track_governance.md`）

## 6) 课堂交付质量门禁（系统防错，适用于所有教学主题）

- 本门禁覆盖 UI、代码、调试、测试、发布与 Git，不仅是“节点新增”场景。
- 学员线每一步都必须以“原子步骤卡”发布，字段不可缺失：
  - `步骤名`
  - `目标`
  - `前提`
  - `动作（对象/路径/命令/参数）`
  - `验收（通过标准）`
  - `失败分叉（A/B）`
  - `最小回退`
- 按任务类型追加强制字段：
  - UI 操作：`节点名 + 精确类型 + 父路径 + 关键属性 + 常见误选`。
  - 代码改动：`文件路径 + 符号定位 + 变更块 + 预期日志/行为`。
  - 调试排障：`假设 + 观测点 + 判定分支 + 下一动作`。
  - 测试验证：`入口/命令 + 通过标准 + 回归范围`。
  - Git 操作：`暂存边界 + 提交意图 + 安全限制`。
- 发出步骤前必须通过 5 项门禁：`完整性 / 单义性 / 可执行性 / 可验证性 / 可恢复性`。
- 课堂执行必须“单步闭环”：发一步 -> 学员回执 -> 校验结果 -> 再发下一步。
- 建立教学事故编码并持续复盘（如 `SPEC`、`PATH`、`VERIFY`、`SAFE`），复盘结论必须回写模板与协议，防止同类问题复发。

## 7) 当前默认执行优先级

1. 用户明确要上课 -> 学员线优先。
2. 用户明确要你学习 -> 导师线执行，但仍维护学员线下节计划。
3. 用户要求提交/上传 -> 先保证知识库文档已同步，再 commit/push。
4. 若学员线未结束，不切导师线；仅在用户明确“你学习下/你备下课”时切换。
