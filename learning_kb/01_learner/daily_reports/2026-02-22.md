# Daily Report

Date: 2026-02-22

Today Goal (English, one line):
Complete Lessons 10-11 by adding enemy patrol/contact damage and objective gating before goal completion.

What I completed today:
- Learner line:
  - Lesson 10 completed: created `Enemy` scene with `CharacterBody2D` body collision + `Area2D` hitbox trigger.
  - Implemented patrol logic (`left/right` bounds, auto turn-back, facing update) in `scenes/enemy.gd`.
  - Integrated enemy damage into `Main` by connecting `hit_player` signal and reusing existing hp deduction path.
  - Preserved state gate: damage is applied only in `PLAYING`; terminal states do not continue damage.
  - Replaced enemy visual with learner-provided asymmetric sprite (`assets/enemy/enemy.png`) and tuned scale/position.
  - Lesson 11 completed: added objective gate (`collect all -> unlock goal`) with `total_coins/remaining_coins/goal_unlocked`.
  - Goal now rejects completion before unlock and allows `WON` only after all collectibles are finished.
  - HUD objective feedback added (`Goal: LOCKED/UNLOCKED (x/y)`), and restart restores initial locked state.
  - Learner理解确认完成：已能解释 `global_position`、视觉翻转、body collision vs hitbox trigger 分工、以及门控状态流。

English Summary (5-8 lines):
Today we completed Lessons 10 and 11 in learner mode.
Lesson 10 delivered a reusable patrol enemy with body collision and an Area2D damage hitbox.
State-gated damage was preserved so hp changes only happen in PLAYING.
Lesson 11 added objective gating with total and remaining collectible counts.
The goal is now locked before completion and unlocks only after all coins are collected.
HUD now exposes objective status as LOCKED/UNLOCKED with progress numbers.
The next lesson is Level 1 to Level 2 scene transition.

Top Terms:
- `global_position`: 节点在世界坐标系中的位置，不随 Camera 变化而重定义。
- `hitbox`: 仅用于触发检测的区域，不承担实体移动碰撞。
- `state gate`: 通过状态机限制逻辑生效时机（例如仅 `PLAYING` 扣血）。
- `objective gate`: 在条件满足前阻断通关事件，满足后再放行。
- `facing flip`: 通过 `Visual.scale.x` 正负切换实现左右朝向。

Next step:
Execute Lesson 12 (`00_plan/lesson_12_2h_runbook.md`) to build Level 1 -> Level 2 transition flow.
